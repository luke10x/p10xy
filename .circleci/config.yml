version: 2.1
orbs:
  node: circleci/node@3.0.0
jobs:
  p10xy-npm-package:
    # docker:
    #   - image: 'cimg/base:stable'
    #     # auth:
    #     #   username: mydockerhub-user
    #     #   password: $DOCKERHUB_PASSWORD  # context / project UI env-var reference
    executor:
      name: node/default
    working_directory: agent
    steps:
      - checkout:
          path: ~/project
      - run: |
          ls -las
          pwd
          npm publish

workflows:
  artefact-createion:
    jobs:
      - node/test:
          app-dir: agent
      - p10xy-npm-package:
          requires:
            - node/test
